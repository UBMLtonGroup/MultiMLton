<HTML
><HEAD
><TITLE
>Installation</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Unix System Programming with Standard ML"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Type Errors"
HREF="x6478.html"><LINK
REL="NEXT"
TITLE="Bibliography"
HREF="b6666.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="book.css"></HEAD
><BODY
CLASS="APPENDIX"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Unix System Programming with Standard ML</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x6478.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="b6666.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="APPENDIX"
><H1
><A
NAME="INSTALLAPPX"
>Appendix C. Installation</A
></H1
><P
>In this appendix I describe how to download and install SML/NJ version
110.0.7 This is the latest stable version at the time of writing.
You will be installing from the source files.  You can get RPMs for Linux
but these won't include the source, which is very useful.  It's quite
easy and fast to install it from source.  My installation is on RedHat
7.1 Linux with the GCC 2.96 compiler.</P
><P
>A characteristic of the installation is that the installed files will
end up in the same directory tree as the source files.  So you must
unpack the source in the place where you want the installed files to go.</P
><P
>To start, go to the SML/NJ home page.  This is at </P
><P
><A
HREF="http://cm.bell-labs.com/cm/cs/what/smlnj/index.html"
TARGET="_top"
><TT
CLASS="COMPUTEROUTPUT"
>http://cm.bell-labs.com/cm/cs/what/smlnj/index.html</TT
></A
></P
><P
>There is an FTP site at Sourceforge but I've found the Bell Labs site
to be the most reliable.  Follow the link &quot;Downloading SML/NJ Software
for Unix or Windows&quot;.  This has a link to some on-line installation
instructions.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Create a directory on your computer where you will install
	the SML/NJ system.  The installation instructions
	call this <TT
CLASS="COMPUTEROUTPUT"
>SMLROOT</TT
> and recommend a path like
	<TT
CLASS="COMPUTEROUTPUT"
>/usr/local/sml</TT
><A
NAME="AEN6562"
HREF="#FTN.AEN6562"
>[1]</A
>. I recommend using a
	subdirectory for the version e.g. <TT
CLASS="COMPUTEROUTPUT"
>/usr/local/sml/110.0.7</TT
>
	and a symbolic link <TT
CLASS="COMPUTEROUTPUT"
>/usr/local/sml/current</TT
> to point
	to it.	This will allow you to try out new versions.  You use
	the <TT
CLASS="COMPUTEROUTPUT"
>current</TT
> name in your CM files.</P
></LI
><LI
><P
>In the SMLROOT directory download the following files. These are
	for Intel x86 architecture on Unix.  Use the FTP links.
	Don't download the Concurrent ML package from this page.</P
><DIV
CLASS="INFORMALTABLE"
><A
NAME="AEN6570"
></A
><P
></P
><TABLE
BORDER="0"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>config.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Installation scripts</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>runtime.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Runtime system</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>cm.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Compilation Manager</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>bin.x86-unix.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>for Intel Pentium processors running UNIX</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>smlnj-lib.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Standard ML of New Jersey Library</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>ml-lex.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>ML-Lex lexical analyzer generator</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>ml-yacc.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>ML-Yacc parser generator</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>ml-burg.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>ML-Burg code-generator generator</P
></TD
></TR
><TR
><TD
WIDTH="170"
ALIGN="LEFT"
VALIGN="TOP"
><P
>sml-nj.tar.Z</P
></TD
><TD
WIDTH="340"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Source code for SML/NJ compiler</P
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
>	You probably won't use ML-Burg but the installation script
	assumes that you have it.  The compiler source file is useful
	for the source of the Basis library, which is in its <TT
CLASS="COMPUTEROUTPUT"
>boot</TT
>
	subdirectory. </P
></LI
><LI
><P
>If you go back to the SML/NJ home page you can follow the links to
	the Concurrent ML page.  In its &quot;What's new&quot; section there is a link
	to a directory containing a patched version.  The link is </P
><P
><A
HREF="ftp://ftp.research.bell-labs.com/dist/smlnj/packages/cml"
TARGET="_top"
><TT
CLASS="COMPUTEROUTPUT"
>ftp://ftp.research.bell-labs.com/dist/smlnj/packages/cml</TT
></A
></P
><P
>	Download the <TT
CLASS="COMPUTEROUTPUT"
>latest.tar.gz</TT
> file into the <TT
CLASS="COMPUTEROUTPUT"
>SMLROOT</TT
>
	directory renaming it to <TT
CLASS="COMPUTEROUTPUT"
>cml.tar.Z</TT
>. This will work as
	long as the <TT
CLASS="COMPUTEROUTPUT"
>zcat</TT
> program on your computer is actually
	from the Gnu gzip package (which it is on Linux).  The install
	script expects the <TT
CLASS="COMPUTEROUTPUT"
>.Z</TT
> suffix.</P
></LI
><LI
><P
>In the SMLROOT directory unpack the <TT
CLASS="COMPUTEROUTPUT"
>config.tar.Z</TT
> file.</P
><TABLE
BORDER="0"
BGCOLOR="#d0ffff"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>zcat config.tar.Z | tar -xf -</PRE
></TD
></TR
></TABLE
><P
>	This will create a subdirectory called <TT
CLASS="COMPUTEROUTPUT"
>config</TT
>.</P
></LI
><LI
><P
>Edit the <TT
CLASS="COMPUTEROUTPUT"
>config/targets</TT
> file to comment out the following
	line.</P
><TABLE
BORDER="0"
BGCOLOR="#d0ffff"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>TARGETS="$TARGETS eXene"</PRE
></TD
></TR
></TABLE
><P
>	You won't need this for any of the examples in this book.
	You might be interested to read the eXene documentation so you
	could download the tar file later.</P
></LI
><LI
><P
>In the <TT
CLASS="COMPUTEROUTPUT"
>SMLROOT</TT
> directory, NOT the <TT
CLASS="COMPUTEROUTPUT"
>config</TT
>
	subdirectory, do</P
><TABLE
BORDER="0"
BGCOLOR="#d0ffff"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>sh config/install.sh</PRE
></TD
></TR
></TABLE
><P
>	This will compile and install everything.  The tar files will be
	unpacked into a <TT
CLASS="COMPUTEROUTPUT"
>src</TT
> subdirectory. The SML compiler is in
	the <TT
CLASS="COMPUTEROUTPUT"
>bin</TT
> subdirectory.  The CM files are in the <TT
CLASS="COMPUTEROUTPUT"
>lib</TT
>
	subdirectory.  You can delete the tar files.</P
><P
>	The compilation process first compiles the run-time. This is
	a normal C language compilation using <TT
CLASS="COMPUTEROUTPUT"
>make</TT
>.  I get lots
	of warnings from the <TT
CLASS="COMPUTEROUTPUT"
>X86.prim.asm</TT
> file but this doesn't
	cause a problem.</P
><P
>	Next the compiler is built from its <TT
CLASS="COMPUTEROUTPUT"
>bin</TT
> files. You
	will see lots of messages like <TT
CLASS="COMPUTEROUTPUT"
>[Loading core.sml.bin]</TT
>.
	Then the various packages are compiled and installed. These
	produce the usual SML compiler blurb with lots of GC messages.</P
></LI
></OL
><P
>The <TT
CLASS="COMPUTEROUTPUT"
>CM</TT
> files in the <TT
CLASS="COMPUTEROUTPUT"
>SMLROOT/lib</TT
> directory are just aliases
for files in the <TT
CLASS="COMPUTEROUTPUT"
>SMLROOT/src</TT
> directory. The compiled binary
files are saved in <TT
CLASS="COMPUTEROUTPUT"
>CM</TT
> subdirectories in the source directories
so you can't delete them.  The aliases (and the configuration manager)
use absolute paths so you can't move them.  This rigidity has been
addressed in later versions of the SML/NJ system.</P
><P
>You can update a package in the system, other than CM and the compiler,
by just replacing the source directory with the new version and compiling
in its source directory (where the <TT
CLASS="COMPUTEROUTPUT"
>sources.cm</TT
> file is) in the
usual way.  With care you can make some changes to the run-time and
recompile it without having to rebuild anything at the SML level.
Look at the install script for the commands to make the run-time.</P
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN6562"
HREF="a6548.html#AEN6562"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>I use <TT
CLASS="COMPUTEROUTPUT"
>/src/smlnj</TT
> and
	this path appears in all of my examples</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x6478.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="b6666.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Type Errors</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Bibliography</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
